<!-- src/app/pages/rules/rules.component.html -->
<div class="rules-page">
  <h1 class="page-title">âš™ï¸ Fraud Rules Management</h1>

  <!-- Error Message -->
  <p *ngIf="error" class="error">{{ error }}</p>

  <!-- Add Rule Form -->
  <div class="card form-card">
    <h3 class="form-title">â• Create a New Rule</h3>
    <div class="form-grid">
      <label>
        <span>Rule Name</span>
        <input [(ngModel)]="name" placeholder="Enter rule name (e.g., High Amount)" />
      </label>

      <label>
        <span>Description</span>
        <input [(ngModel)]="description" placeholder="Describe rule purpose" />
      </label>

      <label>
        <span>Rule Type</span>
        <select
          [(ngModel)]="type"
          (change)="params = JSON.stringify(RULE_TYPES[type].example || {})"
        >
          <option *ngFor="let k of Object.keys(RULE_TYPES)" [value]="k">
            {{ k }}
          </option>
        </select>
      </label>

      <label>
        <span>Params (JSON)</span>
        <input [(ngModel)]="params" placeholder='{ "maxAmount": 10000 }' />
      </label>
    </div>

    <div class="actions">
      <button class="add-btn" (click)="addRule()">ğŸš€ Add Rule</button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="muted">Loading rules...</div>

  <!-- Empty State -->
  <div *ngIf="!loading && rules.length === 0" class="muted">
    No rules found. Create your first one above ğŸ‘†
  </div>

  <!-- Rules Table -->
  <div *ngIf="rules.length > 0" class="card table-card">
    <h3 class="subtitle">ğŸ“œ Active Rules</h3>
    <table class="rules-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Description</th>
          <th>Type</th>
          <th>Params</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let rule of rules">
          <td>{{ rule.id }}</td>
          <td>{{ rule.name }}</td>
          <td>{{ rule.description }}</td>
          <td>{{ rule.type }}</td>
          <td><pre>{{ rule.params | json }}</pre></td>
          <td>
            <button class="delete-btn" (click)="deleteRule(rule.id)">ğŸ—‘ Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
